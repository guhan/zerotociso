# Networking


## Key Concepts
- Intranet: private network designed to host some services
- Extranet: both a private network and also serves up some services for public/Internet consumption
- Encapsulation: addition of a header, and possibly footer to the data received by each layer from the layer above it
- Distance vector routing protocol: maintain a list of destination networks along with metrics of direction and distance (hops)
- Link state routing protocol: maintain a topography map of all connected network and use the map to determine the shortest path to the destination
- TCP Wrapper: an application that serves as a basic firewall by restricting access to ports and resources based on user IDs or system IDs.
- Socket: combination of IP address and port number
- Converged protocols: merging of speciality and proprietary protocols with standard protocols


## What are the IP header protocol field values?
The Protocol field in the IP header is an 8-bit field that indicates the protocol of the data carried in the IP packet's payload. This field specifies which higher-level protocol is being used to interpret the data in the packet's payload. Here are some common Protocol field values along with their corresponding protocols:

- ICMP (Internet Control Message Protocol) - Protocol Number: 1
ICMP is used for sending error messages, operational information, and diagnostic messages about network conditions.
- IGMP (Internet Group Management Protocol) - Protocol Number: 2
IGMP is used by IP hosts to report their multicast group memberships to routers.
- TCP (Transmission Control Protocol) - Protocol Number: 6
TCP provides reliable, connection-oriented communication between devices. It is commonly used for data transmission in applications like web browsing, email, and file transfer.
- UDP (User Datagram Protocol) - Protocol Number: 17
UDP is a connectionless, lightweight protocol used for sending datagrams that don't require the same level of reliability as TCP. It's commonly used for streaming media, online gaming, and other applications where some packet loss is acceptable.
- IPv6 (Internet Protocol version 6) - Protocol Number: 41
This value indicates that the packet carries an IPv6 header in the payload. IPv6 is the successor to IPv4 and is designed to address the limitations of IPv4's address space.
- GRE (Generic Routing Encapsulation) - Protocol Number: 47
GRE is a tunneling protocol used to encapsulate a wide variety of network layer protocols into point-to-point connections.
- ESP (Encapsulating Security Payload) - Protocol Number: 50
ESP is used in IPsec to provide confidentiality, integrity, and authentication for the data in the packet.
- AH (Authentication Header) - Protocol Number: 51
AH is used in IPsec to provide authentication and integrity for the entire packet.
- ICMPv6 (Internet Control Message Protocol version 6) - Protocol Number: 58
ICMPv6 is the version of ICMP used in IPv6 networks to perform similar functions as ICMP does in IPv4.

## What are the ICMP Field types? 
ICMP (Internet Control Message Protocol) is a network protocol used to send error messages and operational information about network conditions. ICMP operates at the network layer of the OSI model and is commonly used for diagnostics and troubleshooting in networking. ICMP responses are generated by routers, switches, or hosts to communicate various conditions and errors. 

Here are some common ICMP response types:

- **Echo Reply (Type 0)**: This is commonly known as a "ping" response. When a host receives an ICMP Echo Request, it responds with an Echo Reply, indicating that the destination host is reachable and operational.
- **Destination Unreachable (Type 3)**: This response indicates that the requested destination is unreachable for various reasons. There are different codes within this type that specify the reason for the unreachability, such as network unreachable, host unreachable, port unreachable, and more.
- **Redirect (Type 5)**: A router sends this response to inform a sender that a better route to a destination is available. It's used to optimize routing in a network.
- **Echo Request (Type 8)**: This is the "ping" request. A host sends an ICMP Echo Request to check if another host is reachable and operational.
- **Router Advertisement (Type 9)**
- **Router Solicitation (Type 10)**

- **Time Exceeded (Type 11)**: This response is generated when the Time-to-Live (TTL) field in an IP packet reaches zero. It indicates that the packet was discarded because it spent too much time in the network, likely due to routing loops or other network issues.
- Parameter Problem (Type 12): This response indicates that there is an issue with the header of an IP packet, such as incorrect field values or options.
- Source Quench (Type 4): This is used to request the sender to reduce the rate of sending packets to a specific destination, usually because the network is congested.

- Timestamp Request (Type 13): A host sends this request to another host to request a timestamp from it. The receiving host responds with a Timestamp Reply.
- Timestamp Reply (Type 14): This is the response to a Timestamp Request, providing the requested timestamp.
- Address Mask Request (Type 17): A host sends this request to discover the subnet mask of another host. The receiving host responds with an Address Mask Reply.
- Address Mask Reply (Type 18): This is the response to an Address Mask Request, providing the subnet mask information.


## What is a three-way handshake?
- A: SYN, initial sequence number
- B: SYN-ACK, initial sequence number 
- A: ACK, increments Bâ€™s ISN

## How are TCP connections closed?
- FIN: start the process for a graceful shutdown with a 4 way ACK
- RST: abrubt close

## What is in a TCP header?
- 20 to 60 bytes long

## What are the different modes of communication?
- **Simplex**: goes only one way
- **Half Duplex**: goes both ways but only one way at a time
- **Full Duplex**: goes both ways at the same time

## What is Multicast? 
One packet is sent and the network equipment replicates it to the multiple subscribers

## What is Unicast?
One packet is sent to one recipient

## How does a CDN use multicast?
CDNs use multicast in the following ways:
- **Content Ingestion**: CDNs often employ multicast for efficient content ingestion from the origin server to the edge nodes. Multicast allows the content to be replicated and distributed across the CDN infrastructure without the need for individual unicast streams from the origin server to each edge node.


- **Internal Communication**: Multicast is used for internal communication and synchronization between different CDN nodes. It helps in efficiently disseminating control and synchronization messages, enabling the CDN infrastructure to operate in a coordinated and synchronized manner.


- **Origin-Edge Communication**: CDNs may use multicast for communication between the origin server and the edge nodes. This allows for efficient distribution of updates or changes in content from the origin server to the edge nodes, minimizing the load on the origin server and optimizing the content replication process.


## What is IPSEC?
**Authentication Header (AH)**: AH provides integrity and authentication of IP packets. It verifies that the content of the packet has not been tampered with during transit and confirms the identity of the sender. AH uses cryptographic hash functions to generate a hash-based message authentication code (HMAC) for packet verification.


**Encapsulating Security Payload (ESP)**: ESP provides confidentiality, integrity, and authentication of IP packets. It encrypts the payload of the IP packets to protect the data from eavesdropping. Additionally, ESP can provide integrity checks to ensure data integrity and authentication of the sender.


**Security Associations (SA)**: SAs are established between IPsec peers to define the security parameters and establish a secure communication channel. The parameters include encryption and authentication algorithms, key exchange methods, and security protocols. SAs are identified by Security Parameter Index (SPI) and can be unidirectional or bidirectional.


**Key Management**: IPsec requires the management of cryptographic keys used for encryption, integrity, and authentication. Key management protocols and mechanisms, such as Internet Key Exchange (IKE), are employed to securely negotiate and exchange keys between IPsec peers.


**Tunnel Mode and Transport Mode**: IPsec can be used in two modes: tunnel mode and transport mode. In tunnel mode, the entire IP packet is encapsulated within a new IP packet, adding an additional layer of security. In transport mode, only the payload of the original IP packet is encrypted and authenticated, while the IP header remains intact.


**Compatibility and Interoperability**: IPsec is supported by a wide range of network devices, including routers, firewalls, and VPN gateways. It ensures compatibility and interoperability between different vendors' equipment, enabling secure communication across heterogeneous networks.

## What is Internet Security Association and Key Management Protocol (ISAKMP)?
Provies background security support for IPSEC by negotiating, establishing, modifying and deleting Security Associations (SAs)


## What is RADIUS?
Here's how RADIUS works:

- Client Authentication Request: When a user attempts to connect to a network resource, such as accessing the internet through a Wi-Fi network, the network access server (NAS) acting as a RADIUS client sends an authentication request to the RADIUS server.


- RADIUS Server Authentication: The RADIUS server receives the authentication request and verifies the user's credentials. The server can use various methods to authenticate the user, such as username and password, digital certificates, token-based authentication, or other authentication mechanisms.


- Authentication Response: After validating the user's credentials, the RADIUS server sends an authentication response to the RADIUS client. The response can be "Access Accept" if the authentication is successful or "Access Reject" if the authentication fails.


- Authorization and Accounting: If the authentication is successful, the RADIUS server can also provide authorization information to the RADIUS client, specifying the user's access privileges and restrictions. Additionally, RADIUS supports accounting functionality, allowing the server to log and track network resource usage, such as session duration, data transferred, and other relevant information.

Key features and benefits of RADIUS include:
- Centralized Authentication: RADIUS enables centralized user authentication and eliminates the need for separate authentication systems in different network access points. This simplifies the management of user credentials and improves security.
- Scalability: RADIUS is scalable and can handle a large number of users and network access points. It allows organizations to efficiently manage authentication and authorization for a large user base and multiple network devices.
- Standardization: RADIUS is an industry-standard protocol, ensuring interoperability and compatibility between different networking vendors and devices. This facilitates the deployment and integration of RADIUS in various network environments.
- Accounting and Auditing: RADIUS provides accounting functionality, allowing organizations to monitor and track network resource usage. This data can be used for auditing, billing, or troubleshooting purposes.


## Ports
- 2^16 or 65536 total
- 0 to 1023: service, well known, or privileged ports
- 1024 to 49151: registered software ports. [IANA](https://wwwiana.org) lets you register the port with them.
- 49152 to 65535: random or dynamic ports
